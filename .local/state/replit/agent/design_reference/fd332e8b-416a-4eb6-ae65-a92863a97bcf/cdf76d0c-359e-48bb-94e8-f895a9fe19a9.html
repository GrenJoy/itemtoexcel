<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warframe Inventory Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'warframe-blue': '#1e3a8a',
                        'warframe-light-blue': '#3b82f6',
                        'warframe-success': '#10b981',
                        'warframe-dark': '#1f2937',
                        'warframe-gray': '#374151'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'ui-sans-serif', 'system-ui']
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
    <!-- @COMPONENT: Header -->
    <header class="bg-warframe-dark border-b border-gray-700 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="bg-warframe-blue p-2 rounded-lg">
                        <i class="fas fa-robot text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Warframe Inventory Tracker</h1>
                        <p class="text-sm text-gray-400">AI-powered inventory management</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="bg-warframe-light-blue hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        <i class="fas fa-download mr-2"></i>Export Excel
                    </button>
                    <button class="bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-lg transition-colors duration-200">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- @COMPONENT: APIKeyModal -->
        <div id="apiKeyModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-warframe-dark rounded-xl p-6 max-w-md w-full mx-4 border border-gray-700">
                <div class="flex items-center mb-4">
                    <i class="fas fa-key text-warframe-light-blue mr-3"></i>
                    <h3 class="text-lg font-semibold text-white">Настройка API</h3>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Gemini API Key</label>
                        <input type="password" placeholder="Введите ваш API ключ" 
                               class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-warframe-light-blue focus:border-transparent">
                        <p class="text-xs text-gray-400 mt-1">Ключ будет сохранен локально и не передается третьим лицам</p>
                    </div>
                    <div class="flex space-x-3">
                        <button class="flex-1 bg-warframe-light-blue hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors duration-200">
                            Сохранить
                        </button>
                        <button class="flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-colors duration-200">
                            Отмена
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: APIKeyModal -->

        <!-- @COMPONENT: UploadSection -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-warframe-dark rounded-xl border border-gray-700 p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-cloud-upload-alt text-warframe-light-blue mr-3 text-xl"></i>
                    <h2 class="text-xl font-semibold text-white">Загрузка скриншотов</h2>
                </div>
                
                <!-- File Drop Zone -->
                <div class="border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-warframe-light-blue transition-colors duration-200 cursor-pointer"
                     id="dropZone">
                    <i class="fas fa-images text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg text-gray-300 mb-2">Перетащите файлы сюда</p>
                    <p class="text-sm text-gray-400 mb-4">или нажмите для выбора</p>
                    <button class="bg-warframe-light-blue hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors duration-200">
                        Выбрать файлы
                    </button>
                    <input type="file" multiple accept="image/*" class="hidden" id="fileInput">
                </div>

                <!-- File List -->
                <div id="fileList" class="mt-4 space-y-2 hidden">
                    <h3 class="text-sm font-medium text-gray-300">Выбранные файлы:</h3>
                    <!-- @MAP: selectedFiles.map(file => ( -->
                    <div class="flex items-center justify-between bg-gray-800 rounded-lg p-3" data-mock="true">
                        <div class="flex items-center">
                            <i class="fas fa-image text-warframe-light-blue mr-3"></i>
                            <span class="text-sm text-gray-300" data-bind="file.name">screenshot_1.png</span>
                        </div>
                        <button class="text-red-400 hover:text-red-300 transition-colors duration-200">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <!-- @END_MAP )) -->
                </div>

                <button class="w-full mt-4 bg-warframe-success hover:bg-green-600 text-white py-3 px-4 rounded-lg transition-colors duration-200 disabled:bg-gray-600 disabled:cursor-not-allowed"
                        id="processButton" disabled>
                    <i class="fas fa-magic mr-2"></i>Обработать скриншоты
                </button>
            </div>

            <!-- Processing Status -->
            <div class="bg-warframe-dark rounded-xl border border-gray-700 p-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-tasks text-warframe-light-blue mr-3 text-xl"></i>
                    <h2 class="text-xl font-semibold text-white">Статус обработки</h2>
                </div>

                <!-- @STATE: isProcessing:boolean = false -->
                <div id="processingStatus" class="space-y-4">
                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-gray-300">Анализ изображений</span>
                            <span class="text-xs text-gray-400">0/0</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-warframe-light-blue h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="bg-gray-800 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-gray-300">Получение цен</span>
                            <span class="text-xs text-gray-400">0/0</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-warframe-success h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- Processing Log -->
                    <div class="bg-gray-800 rounded-lg p-4 max-h-32 overflow-y-auto">
                        <h4 class="text-sm font-medium text-gray-300 mb-2">Лог обработки:</h4>
                        <div class="text-xs space-y-1" id="processLog">
                            <p class="text-gray-400">Ожидание загрузки файлов...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: UploadSection -->

        <!-- @COMPONENT: InventoryTable -->
        <div class="bg-warframe-dark rounded-xl border border-gray-700 overflow-hidden">
            <div class="flex items-center justify-between p-6 border-b border-gray-700">
                <div class="flex items-center">
                    <i class="fas fa-warehouse text-warframe-light-blue mr-3 text-xl"></i>
                    <h2 class="text-xl font-semibold text-white">Инвентарь</h2>
                    <span class="ml-3 bg-warframe-light-blue text-white text-xs px-2 py-1 rounded-full" data-bind="items.length">247 предметов</span>
                </div>
                
                <!-- Search and Filters -->
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Поиск предметов..." 
                               class="bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-warframe-light-blue focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <select class="bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-warframe-light-blue focus:border-transparent">
                        <option>Все категории</option>
                        <option>Prime части</option>
                        <option>Чертежи</option>
                        <option>Моды</option>
                    </select>
                </div>
            </div>

            <!-- Table -->
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-800 border-b border-gray-700">
                        <tr>
                            <th class="text-left py-3 px-6 text-sm font-medium text-gray-300">Название</th>
                            <th class="text-center py-3 px-4 text-sm font-medium text-gray-300">Кол-во</th>
                            <th class="text-center py-3 px-4 text-sm font-medium text-gray-300">Цена продажи</th>
                            <th class="text-center py-3 px-4 text-sm font-medium text-gray-300">Цена покупки</th>
                            <th class="text-center py-3 px-4 text-sm font-medium text-gray-300">Средняя продажа</th>
                            <th class="text-center py-3 px-4 text-sm font-medium text-gray-300">Действия</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700">
                        <!-- @MAP: inventoryItems.map(item => ( -->
                        <tr class="hover:bg-gray-800 transition-colors duration-150" data-mock="true">
                            <td class="py-3 px-6">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 bg-warframe-light-blue rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-cube text-white text-xs"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium" data-bind="item.name">Наутилус Прайм: Панцирь</p>
                                        <p class="text-xs text-gray-400" data-bind="item.category">Prime части</p>
                                    </div>
                                </div>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="bg-gray-700 text-white px-2 py-1 rounded text-sm" data-bind="item.quantity">3</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-warframe-success font-medium" data-bind="item.sellPrices">3, 4, 4, 4</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-blue-400 font-medium" data-bind="item.buyPrices">2, 1</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-white font-medium" data-bind="item.avgSell">3.75</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <div class="flex items-center justify-center space-x-2">
                                    <button class="text-warframe-light-blue hover:text-blue-400 transition-colors duration-200" 
                                            title="Посмотреть на Warframe Market">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="text-yellow-400 hover:text-yellow-300 transition-colors duration-200" 
                                            title="Редактировать количество">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-400 hover:text-red-300 transition-colors duration-200" 
                                            title="Удалить из инвентаря">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr class="hover:bg-gray-800 transition-colors duration-150" data-mock="true">
                            <td class="py-3 px-6">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-scroll text-white text-xs"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium">Севагот Прайм: Система (Чертеж)</p>
                                        <p class="text-xs text-gray-400">Чертежи</p>
                                    </div>
                                </div>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="bg-gray-700 text-white px-2 py-1 rounded text-sm">1</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-warframe-success font-medium">8, 8, 10, 10</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-blue-400 font-medium">Нет</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-white font-medium">9.0</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <div class="flex items-center justify-center space-x-2">
                                    <button class="text-warframe-light-blue hover:text-blue-400 transition-colors duration-200">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="text-yellow-400 hover:text-yellow-300 transition-colors duration-200">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-400 hover:text-red-300 transition-colors duration-200">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>

                        <tr class="hover:bg-gray-800 transition-colors duration-150" data-mock="true">
                            <td class="py-3 px-6">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-cube text-white text-xs"></i>
                                    </div>
                                    <div>
                                        <p class="text-white font-medium">Эквинокс Прайм: Нейрооптика (Чертеж)</p>
                                        <p class="text-xs text-gray-400">Чертежи</p>
                                    </div>
                                </div>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="bg-gray-700 text-white px-2 py-1 rounded text-sm">1</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-warframe-success font-medium">8, 8, 8, 10, 10</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-blue-400 font-medium">Нет</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <span class="text-white font-medium">8.8</span>
                            </td>
                            <td class="py-3 px-4 text-center">
                                <div class="flex items-center justify-center space-x-2">
                                    <button class="text-warframe-light-blue hover:text-blue-400 transition-colors duration-200">
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button class="text-yellow-400 hover:text-yellow-300 transition-colors duration-200">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-400 hover:text-red-300 transition-colors duration-200">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <!-- @END_MAP )) -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="flex items-center justify-between p-6 border-t border-gray-700">
                <div class="text-sm text-gray-400">
                    Показано 1-50 из 247 предметов
                </div>
                <div class="flex items-center space-x-2">
                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg transition-colors duration-200 disabled:bg-gray-800 disabled:cursor-not-allowed" disabled>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="bg-warframe-light-blue text-white px-3 py-2 rounded-lg">1</button>
                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg transition-colors duration-200">2</button>
                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg transition-colors duration-200">3</button>
                    <span class="text-gray-400 px-2">...</span>
                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg transition-colors duration-200">5</button>
                    <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg transition-colors duration-200">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: InventoryTable -->

        <!-- @COMPONENT: Statistics -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <div class="bg-warframe-dark rounded-xl border border-gray-700 p-6">
                <div class="flex items-center">
                    <div class="bg-warframe-light-blue p-3 rounded-lg">
                        <i class="fas fa-box-open text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-2xl font-bold text-white" data-bind="stats.totalItems">247</p>
                        <p class="text-sm text-gray-400">Всего предметов</p>
                    </div>
                </div>
            </div>

            <div class="bg-warframe-dark rounded-xl border border-gray-700 p-6">
                <div class="flex items-center">
                    <div class="bg-warframe-success p-3 rounded-lg">
                        <i class="fas fa-coins text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-2xl font-bold text-white" data-bind="stats.totalValue">12,450</p>
                        <p class="text-sm text-gray-400">Общая стоимость (платина)</p>
                    </div>
                </div>
            </div>

            <div class="bg-warframe-dark rounded-xl border border-gray-700 p-6">
                <div class="flex items-center">
                    <div class="bg-orange-500 p-3 rounded-lg">
                        <i class="fas fa-chart-line text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-2xl font-bold text-white" data-bind="stats.avgPrice">50.4</p>
                        <p class="text-sm text-gray-400">Средняя цена предмета</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: Statistics -->
    </div>

    <!-- @COMPONENT: EditQuantityModal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-warframe-dark rounded-xl p-6 max-w-sm w-full mx-4 border border-gray-700">
            <div class="flex items-center mb-4">
                <i class="fas fa-edit text-warframe-light-blue mr-3"></i>
                <h3 class="text-lg font-semibold text-white">Изменить количество</h3>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Предмет</label>
                    <p class="text-white bg-gray-800 rounded-lg px-3 py-2" data-bind="editItem.name">Наутилус Прайм: Панцирь</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Количество</label>
                    <input type="number" min="0" value="3" 
                           class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-warframe-light-blue focus:border-transparent">
                </div>
                <div class="flex space-x-3">
                    <button class="flex-1 bg-warframe-success hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors duration-200">
                        Сохранить
                    </button>
                    <button class="flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-colors duration-200">
                        Отмена
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: EditQuantityModal -->

    <script>
        // TODO: Implement business logic, API calls, and state management
        (function() {
            // File upload functionality
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            const processButton = document.getElementById('processButton');
            
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('border-warframe-light-blue');
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('border-warframe-light-blue');
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    fileList.classList.remove('hidden');
                    processButton.disabled = false;
                    processButton.classList.remove('disabled:bg-gray-600');
                }
            });

            // Modal controls
            const apiKeyModal = document.getElementById('apiKeyModal');
            const editModal = document.getElementById('editModal');
            
            // Show API modal on first load if no key stored
            if (!localStorage.getItem('geminiApiKey')) {
                apiKeyModal.classList.remove('hidden');
            }
        })();
    </script>
</body>
</html>